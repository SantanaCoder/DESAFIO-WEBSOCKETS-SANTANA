<h1>Lista de porductos en tiempo real</h1>

<ul id="product-list" style="list-style-type: none; padding: 0; display: flex; flex-wrap: wrap; justify-content: space-around; gap: 20px; margin-top: 20px;">
    {{#each products}}
        <li style="border: 1px solid #ccc; padding: 10px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h2>{{this.title}}</h2>
            <p><strong>Precio:</strong> ${{this.price}}</p>
            <p><strong>Descripción:</strong> {{this.description}}</p>
        </li>
    {{/each}}
</ul>

<form id="product-form">
    <input type="text" placeholder="nombre del producto" id="product-name" required >
    <input type="text" placeholder="descripcion" id="product-description" required> 
    <input type="number" placeholder="precio" id="product-price" required> 
    <button type="submit">Agregar Producto</button>
</form>


<script src="/socket.io/socket.io.js"></script>
 <script>
       const socket = io();

socket.on('updateProducts', (products) => {
    const productList = document.getElementById('product-list');
    productList.innerHTML = '';
    products.forEach(product => {
        const listItem = document.createElement('li'); 
        listItem.style.border = "1px solid #ccc";
        listItem.style.padding = "10px";
        listItem.style.borderRadius = "10px";
        listItem.style.boxShadow = "0 2px 4px rgba(0,0,0,0.1)";

        listItem.innerHTML = `
            <h2>${product.title}</h2>
            <p><strong>Precio:</strong> $${product.price}</p>
            <p><strong>Descripción:</strong> ${product.description}</p>
        `;

        productList.appendChild(listItem);
    });
});

const productForm = document.getElementById('product-form');
productForm.addEventListener('submit', (event) => {
    event.preventDefault();
    const productName = document.getElementById('product-name').value;
    const productDescription = document.getElementById('product-description').value; 
    const productPrice = document.getElementById('product-price').value; 

    const newProduct = {
        title: productName,
        description: productDescription,
        price: productPrice
    };

    socket.emit('addProduct', newProduct);
    document.getElementById('product-name').value = '';
    document.getElementById('product-description').value = '';
    document.getElementById('product-price').value = '';
});

    </script>